@page "/Submissions/Department-Metric-Scores/"
@model Metrics.Web.Pages.Submissions.DepartmentMetricScores.IndexModel
@{
    ViewData["Title"] = "Department Metric Score Submissions";
}


<div class="sectionTitle">
    <h3>Department Metric Score Submissions</h3>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-page="/Index">Home</a></li>
            <li class="breadcrumb-item"><a asp-page="/Submissions/Index">Submissions</a></li>
            <li class="breadcrumb-item active">Submissions List</li>
        </ol>
    </nav>
</div>

<div class="container">
    <div class="my-4 pb-4">

    <table id="dataTable" class="table table-bordered table-striped" style="width: 100%;">
        <thead>
            <tr>
                <th>Period</th>
                <th>Duration</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @if(Model.SubmissionPeriods.Any())
            {
                @foreach(var period in Model.SubmissionPeriods)
                {
                    <tr>
                        <td class="text-center">
                            <strong>@period.PeriodName</strong>
                        </td>
                        <td class="text-center mono-text">
                            <div class="period-container">
                                <i class="bi bi-calendar4-week text-primary"> </i> 
                                <label class="ms-2">
                                    @period.SubmissionStartDate.ToLocalTime().ToString("dd MMM, yyyy") - @period.SubmissionEndDate.ToLocalTime().ToString("dd MMM, yyyy")</label>
                            </div>
                        </td>
                        <td class="text-center">
                            <div class="status-container">
                                @if(period.IsSubmitted) {
                                    <i class="bi bi-check2-circle text-success @(period.IsValid ? "" : "text-secondary")"> </i>
                                        <label class="ms-2 @(period.IsValid ? "" : "text-secondary")">Completed</label> 
                                }
                                else {
                                    <i class="bi bi-exclamation-circle text-danger @(period.IsValid ? "" : "text-secondary")"> </i>
                                        <label class="ms-2 @(period.IsValid ? "" : "text-secondary")">
                                            @(period.IsValid ? "Incomplete" : "-")</label> 
                                }
                            </div>
                        </td>
                        <td class="text-center"> 
                            @if(period.IsSubmitted) {
                                @if(period.IsValid) {
                                    <a asp-page="Submit" 
                                        asp-route-periodName="@period.PeriodName"
                                        class="link-offset-2"><strong>View</strong></a>
                                } else {
                                    <a disabled class="text-secondary link-offset-2" aria-disabled="true">View</a>
                                }
                            }
                            else
                            {
                                @if(period.IsValid) {
                                    <a asp-page="Submit" 
                                        asp-route-periodName="@period.PeriodName"
                                        class="link-offset-2"><strong>Submit</strong></a>
                                }
                                else {
                                    <a aria-disabled="true" class="link-offset-2 text-secondary">View</a>
                                }
                            }
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>


@section Styles {
<style>
 
</style>
}

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        new DataTable('#dataTable', {
            paging: false,
            info: false,
            searching: false,
            initComplete: function() {
                $('thead th').addClass('text-light text-center ');
                $('thead th').addClass('bg-brand-color');
            }
        });
    </script>
}